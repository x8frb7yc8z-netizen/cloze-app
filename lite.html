<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频点读压力测试</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        video { width: 100%; border-radius: 8px; background: #000; margin-bottom: 20px; }
        .test-btn { 
            display: block; width: 100%; padding: 15px; margin-bottom: 10px;
            background: #007AFF; color: white; border: none; border-radius: 8px; font-size: 16px;
        }
        #status { color: #666; font-size: 12px; margin-top: 10px; }
    </style>
</head>
<body>

    <video id="testVideo" controls playsinline>
        <source src="Lost_S01E01.mp4" type="video/mp4">
    </video>

    <div id="status">等待视频加载...</div>

    <input type="file" id="fileInput" accept="video/*" style="display:none">
    <button class="test-btn" style="background:#34c759" onclick="document.getElementById('fileInput').click()">
        1. 关联本地视频文件
    </button>

    <hr>

    <p>点击下方按钮测试跳转：</p>
    <button class="test-btn" onclick="seekTo(10)">跳转到第 10 秒 (测试开头)</button>
    <button class="test-btn" onclick="seekTo(600)">跳转到第 10 分钟 (测试大文件Seek)</button>
    <button class="test-btn" onclick="seekTo(1200)">跳转到第 20 分钟 (测试M4解码)</button>

    <script>
        const video = document.getElementById('testVideo');
        const status = document.getElementById('status');

        // 关联文件逻辑
        document.getElementById('fileInput').onchange = (e) => {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                video.src = url;
                status.innerText = `成功关联文件: ${file.name} (${(file.size/1024/1024).toFixed(2)}MB)`;
            }
        };

        // 执行跳转函数
        function seekTo(seconds) {
            if (!video.src && !video.querySelector('source').src) {
                alert("请先关联视频文件！");
                return;
            }
            video.currentTime = seconds;
            video.play();
            status.innerText = `当前指令：跳转至 ${seconds} 秒`;
        }

        // 监听视频实际进度变化
        video.ontimeupdate = () => {
            if(video.currentTime > 0) {
                status.innerText = `当前播放时间: ${video.currentTime.toFixed(2)} 秒`;
            }
        };
    </script>
</body>
</html>
